     1                                  ;15. Se dau un nume de fisier si un text (definite in segmentul de date). Textul contine litere mici, litere mari, cifre si caractere ;speciale. Sa se inlocuiasca toate caracterele speciale din textul dat cu caracte
     2                                  
     3                                  bits 32
     4                                  
     5                                  global start
     6                                  
     7                                  extern exit, fclose, fopen, fprintf, scanf
     8                                  import exit msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import fprintf msvcrt.dll
    11                                  import fopen msvcrt.dll
    12                                  import scanf msvcrt.dll
    13                                  
    14                                  segment date use32 class = date
    15 00000000 416365737461206573-         text db "Acesta este un te#xt ce cont$ine car%actere sp<e>ciale. Iata textul: %ana^ &are* (mere! si $pere), #dar@ -si_ +prune~.", 0
    15 00000009 746520756E20746523-
    15 00000012 787420636520636F6E-
    15 0000001B 7424696E6520636172-
    15 00000024 256163746572652073-
    15 0000002D 703C653E6369616C65-
    15 00000036 2E2049617461207465-
    15 0000003F 7874756C3A2025616E-
    15 00000048 615E20266172652A20-
    15 00000051 286D65726521207369-
    15 0000005A 202470657265292C20-
    15 00000063 2364617240202D7369-
    15 0000006C 5F202B7072756E657E-
    15 00000075 2E00               
    16                                      lg equ ($ - text)
    17 00000077 7700                        mod_access db 'w', 0
    18 00000079 6E756D652E74787400          nume_fisier db "nume.txt", 0
    19 00000082 FFFFFFFF                    descriptor dd -1
    20 00000086 7E6023214024255E26-         caractere_speciale db "~`#!@$%^&*()_-=+?><,./';\|"
    20 0000008F 2A28295F2D3D2B3F3E-
    20 00000098 3C2C2E2F273B5C7C   
    21                                      
    22                                  segment code use32 class = code
    23                                      start:
    24 00000000 68[77000000]                    push dword mod_access
    25 00000005 68[79000000]                    push dword nume_fisier
    26 0000000A FF15[00000000]                  call [fopen]
    27 00000010 83C408                          add esp, 4 * 2
    28                                          
    29 00000013 A3[82000000]                    mov [descriptor], eax
    30                                          
    31 00000018 83F800                          cmp eax, 0
    32 0000001B 7432                            je final
    33                                          
    34 0000001D B977000000                      mov ecx, lg
    35 00000022 31F6                            xor esi, esi
    36                                          
    37                                          bucla:
    38                                             
    39                                              
    40 00000024 8A9E[00000000]                      mov bl, [text + esi]
    41                                              
    42 0000002A 31FF                                xor edi, edi
    43                                              
    44 0000002C 83F900                              cmp ecx, 0
    45 0000002F 741E                                je final
    46                                         
    47                                              repeta:
    48 00000031 8A97[86000000]                          mov dl, [caractere_speciale + edi]
    49                                                  
    50 00000037 80FA00                                  cmp dl, 0
    51 0000003A 740F                                    je actualizare
    52                                                  
    53 0000003C 38D3                                    cmp bl, dl
    54 0000003E 7508                                    jne urm_caracter
    55                                                  
    56 00000040 B258                                    mov dl, 'X'
    57 00000042 8896[00000000]                          mov [text + esi], dl
    58                                                  
    59                                              urm_caracter:
    60 00000048 47                                      inc edi
    61 00000049 EBE6                                    jmp repeta
    62                                              actualizare:
    63 0000004B 46                                      inc esi
    64 0000004C 49                                      dec ecx
    65 0000004D EBD5                                    jmp bucla
    66                                          
    67                                          
    68                                      final:
    69 0000004F 68[00000000]                    push dword text
    70 00000054 FF35[82000000]                  push dword [descriptor]
    71 0000005A FF15[00000000]                  call [fprintf]
    72 00000060 83C408                          add esp, 4 * 2
    73                                          
    74 00000063 FF35[82000000]                  push dword [descriptor]
    75 00000069 FF15[00000000]                  call [fclose]
    76 0000006F 83C404                          add esp, 4 * 1
    77                                      
    78 00000072 6A00                            push dword 0
    79 00000074 E8(00000000)                    call exit
